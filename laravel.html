<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
        <meta name="description" content="" />
        <meta name="author" content="" />
        <title>Laravel Courses</title>
        <!-- Favicon-->
        <link rel="icon" type="image/x-icon" href="assets/favicon.ico" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
        <link rel="preconnect" href="https://fonts.gstatic.com">
        <link href="https://fonts.googleapis.com/css2?family=Libre+Baskerville&family=Merriweather:ital@0;1&family=Poppins:wght@300;400&display=swap" rel="stylesheet">
        
        <!-- Core theme CSS (includes Bootstrap)-->
        <link href="css/styles.css" rel="stylesheet" />
        <link href="style.css" rel="stylesheet" />

    </head>
    <body>
        <div class="d-flex" id="wrapper">
            <!-- Sidebar-->
            <div class="bg-light border-right" id="sidebar-wrapper">
                <div class="sidebar-heading">Mohamed Bachir</div>
                <div class="list-group list-group-flush">
                    <a class="list-group-item list-group-item-action bg-light" href="#!"><h5>6. Laravel</h5></a>
                    
                    <a class="list-group-item list-group-item-action bg-light" href="#appliquercss">6.1 Routing </a>
                    <a class="list-group-item list-group-item-action bg-light" href="#migrations">6.2 Les migrations</a>

                    <a class="list-group-item list-group-item-action bg-light" href="#models">6.3 Les Modèles</a>
                    <a class="list-group-item list-group-item-action bg-light" href="#controllers">6.4 Les contrôleurs </a> 
                 <a class="list-group-item list-group-item-action bg-light" href="#views">6.5 Les Vues</a>
                 <a class="list-group-item list-group-item-action bg-light" href="#relationships">6.6 Les Relations entre les modèles</a>
                 <a class="list-group-item list-group-item-action bg-light" href="#querying">6.7 Eloquent Querying</a>

                   <!-- <!--    <a class="list-group-item list-group-item-action bg-light" href="examples.html">2.5 Exemples</a>
                   -->

                </div>
            </div>
            <!-- Page Content-->
            <div id="page-content-wrapper">
                <nav class="navbar navbar-expand-lg navbar-light bg-light border-bottom">
                    <button class="btn btn-primary" id="menu-toggle"><i class="fa fa-bars" aria-hidden="true"></i>
                    </button>
                    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation"><span class="navbar-toggler-icon"></span></button>
                    <div class="collapse navbar-collapse" id="navbarSupportedContent">
                        <ul class="navbar-nav ml-auto mt-2 mt-lg-0">
                            <li class="nav-item active">
                                <a class="nav-link" href="index.html">
                                    HTML
                                    <span class="sr-only">(current)</span>
                                </a>
                            </li>
                            <li class="nav-item active"><a class="nav-link" href="#!">CSS</a></li>
                            <li class="nav-item active"><a class="nav-link" href="js.html">JavaScript</a></li>
                            <li class="nav-item active"><a class="nav-link" href="bdd.html">BDD</a></li>
                            <li class="nav-item active"><a class="nav-link" href="php.html">PHP</a></li>

                            <li class="nav-item active"><a class="nav-link" href="laravel.html">Laravel</a></li>

                        
                        </ul>
                    </div>
                </nav>
                <div class="container-fluid pb-5">
                    <h2 class="my-3">Laravel</h2>
                    <div class="d-flex flex-row align-items-end p-4">
                        <img src="https://static-00.iconduck.com/assets.00/laravel-icon-497x512-uwybstke.png" height="100px" width="100px" alt="">
                        <p class="m-3">
                            Laravel est un framework PHP multiplateforme pour la création d'applications Web. Il s'agit d'une plate-forme basée sur un serveur qui gère les données à l'aide du modèle de conception Model-View-Controller (MVC),
                            <br>
                            divisant l'architecture backend d'une application en éléments logiques.
    
                        </p>
    
                    </div>
                    <h3 class="my-2" id="appliquercss">6.1 Routing </h3>

                    <p>
                          La gestion des urls en laravel est accessible via le dossier routes   , le dosseir contient 4 fichiers (web.php , api.php , channels.php , console.php )
                        <ul>
                            <li> web.php : utilisé pour gérer les urls web </li>
                            <li> api.php : utilisé pour gérer les api  </li>
                            <li> channels.php : utilisé pour gérer les événement  de broadcasting </li>
                            <li> console.php : utilisé pour répertorier les commandes de la console  </li>


                        </ul>
                      Prenons l'example de la création d'une page web page qui affiche bonjour le monde :
                      <pre>
                        Route::get('/home',function(){
                            return "bonjour le monde";
                        });
                      </pre>   
                      <p>
                        Il existe plusieurs type requêtes http (get , post ... ), pour cela il suffit juste de préciser le type en utilisant la méthode static la plus approprié .

                        <pre>
                            Route::get('/home',function(){});
                            Route::post('/home',function(){});
                            Route::put('/home',function(){});
                            Route::delete('/home',function(){});
                            Route::patch('/home',function(){});

                        </pre>
                      </p>
                      
                      <h4>Route parameters </h4>
                      <p>obligatoire :</p>
                      <pre>
                        Route::get('/users/{id}',function($id){
                            return $id;
                        });

                      </pre>
                      <p>optionnel : </p>
                      <pre>
                        Route::get('/users/{id?}',function($id =null){
                            return $id;
                        });
                      </pre>
                      <p>
                        Pour s'assurer qu'il s'agit des bons paramètres on peut rajouter des conditions à vérifier , via Expression régulière ou bien des fonctions intégré :
                        <pre>
                            Route::get('/users/{id}',function($id){
                                return $id;
                            })->whereNumber('id');
                        </pre> 
                      </p>
                      <p>
                        Laravel offre la possibilité d'associer un nom à nos routes :
                        <pre>
                            Route::get('/users/{id}',function($id){
                                return $id;
                            })->name('user');
                        </pre>
                      </p>
                </p>
                <h3 id="migrations">6.3 Migrations</h3>
                    <p>La création des migrations en laravel est accessible via la commande artisan make:migrations (le nom de la migration)
                        <br>Les migrations sert à créer des schémas avec les bases de données (création des tables , suppression des tables , modifications des schémas , etc)
                        <br>Les migrations se trouvent dans le dossier parent database.
                      <br>
                      <h4>Example migration : </h4>
                      <pre>
                        /**
                        * Executer la migration.
                        */
                       public function up()
                       {
                           Schema::create('populations', function (Blueprint $table) {
                               $table->id();
                               $table->string('designation');
                               $table->timestamps();
                           });
                       }
                   
                       /**
                        * Annuler les migrations.
                        */
                       public function down()
                       {
                           Schema::dropIfExists('populations');
                       }
                      </pre>
                      <h4>La liste des types des Colonnes :</h4>
                      <table class="table">
                        <thead class="table-primary">
                            <tr>
                                <td>Type</td>
                                <td>Designation</td>
                            </tr>

                        </thead>
                        <tbody>
                            <tr><td>bigIncrements</td> <td>Un entier trés grand avec option d'incrémentation automatique</td></tr>
                            <tr>
                                <td>boolean</td>
                                <td>our créer un booléen</td>
                            </tr>
                            <tr>
                                <td>char</td>
                                <td>chaine de caractères qui prend un paramètre pour délimiter la longueure</td>
                            </tr>
                            <tr>
                                <td>datetime</td>
                                <td>Un champ qui contient la date et l'heure</td>
                            </tr>
                            <tr>
                                <td>date</td>
                                <td>Un champ qui contient la date</td>
                            </tr>
                            <tr>
                                <td>float</td>
                                <td>Pour les nombre réel</td>
                            </tr>
                            <tr>
                                <td>geometry</td>
                                <td>pour créer un point , polylines  ... </td>
                            </tr>
                            <tr>
                                <td>json</td>
                                <td>pour stocker des objets en format json</td>
                            </tr>
                            <tr>
                                <td>string</td>
                                <td>pour les chaines de caractères</td>
                            </tr>
                            <tr>
                                <td>text</td>
                                <td>pour les texts trop long</td>
                            </tr>
                            <tr>
                                <td>ipAddress</td>
                                <td>pour stocker les adresse ip</td>
                            </tr>
                            <tr>
                                <td>timestamps</td>
                                <td>elle crée des champs created_at et updated_at pour la table de type datetime</td>
                            </tr>
                        </tbody>
                      </table>
                      <p>NB: cette liste n'est pas complète voir documentation officielle </p>
                      <h4>La liste des commandes des migrations : </h4>
                   
                      <table class="table">
                        <thead class="table-primary">
                            <tr>
                                <td>Commande</td>
                                <td>Utilité</td>
                            </tr>
                        </thead>
                            <tr>
                                <td>migrate</td>
                                <td>Pour executer les migrations / NB : cette commande execute toutes les migrations restantes il est possible de spécifier le fichier à executer via le paramètre --path </td>
                            </tr>
                            <tr>
                                <td>migrate:status</td>
                                <td>Pour récupérer les états des migrations </td>
                            </tr>
                            <tr>
                                <td>migrate --pretend</td>
                                <td>sert à réaliser des simulations d'execution</td>
                            </tr>
                            <tr>
                                <td>migrate --force</td>
                                <td>Pour forcer l'execution des migrations (attention certaines migrations sont destructrices)</td>
                            </tr>
                            <tr>
                                <td>migrate:rollback</td>
                                <td>Pour annuler les dernières migrations exécutés revenir à l'état initiale, avec le paramètre --step on peut spécifier le nombre de pas</td>
                            </tr>
                            <tr>
                                <td>migrate:reset</td>
                                <td>Pour annuler toutes les migrations</td>
                            </tr>
                            <tr>
                                <td>migrate:refresh</td>
                                <td>Annuler toutes les migrations , puis les réexcuter </td>
                            </tr>   
                            <tr>
                                <td>migrate:fresh</td>
                                <td>Supprime toutes les tables de la bases de données , puis éxecute migrate</td>
                            </tr>
                        <tbody>

                        </tbody>
                    
                      </table>
                    </p>
                <h3 id="models">6.3 Modèles</h3>    
                    <p>Les Modèles représente le premier pilier de l'architecture M.V.C, Les modèles communique essentiellement avec les migrations afin de convertir 
                        les tables de la base de données en Class , ceci est possible via Eloquent ORM de laravel. 
                        <br>
                        La création des modèles via commande  : php artisan make:model (Nom du modèle)
                        <pre>


&lt;?php

namespace App\Models;

use Illuminate\Contracts\Auth\MustVerifyEmail;
use Illuminate\Database\Eloquent\Factories\HasFactory;
use Illuminate\Foundation\Auth\User as Authenticatable;
use Illuminate\Notifications\Notifiable;
use Laravel\Sanctum\HasApiTokens;

class User extends Authenticatable
{
    use HasApiTokens, HasFactory, Notifiable;

    /**
     * The attributes that are mass assignable.
     *
     * @var array<int, string>
     */
    protected $fillable = [
        'name',
        'email',
        'password',
    ];

    /**
     * The attributes that should be hidden for serialization.
     *
     * @var array<int, string>
     */
    protected $hidden = [
        'password',
        'remember_token',
    ];

    /**
     * The attributes that should be cast.
     *
     * @var array<string, string>
     */
    protected $casts = [
        'email_verified_at' => 'datetime',
    ];
}
                        </pre>
        </p>
    <h3 id="controllers">6.4 Contrôleurs</h3>
    <p>Comme son nom indique M.V.C (Model,View , Controller ) , Les contrôleures représente l'un des piliers du framework . <br>
        Les controlleurs s'encharge d'assurer la communication avec les modèles et les views, Chaque controleur possèdent des fonctions qui peuvent être associées aux Routes. 
    </p>
        <br>
                  
    <pre>
        // web.php file 
        Route::get('/user',[HomeController::class,'user']);
        // HomeController file
        public function user(){
            return "hello user";
        }
    </pre>              
                    

    <h3 id="views">6.5 Les Vues</h3>
    <p>
        Dans le cadre MVC, la lettre "V" signifie Vues. Il sépare la logique d'application et la logique de présentation. Les vues sont stockées dans le répertoire resources/views. Généralement, la vue contient le code HTML qui sera servi par l'application.
        <br> Les vues en laravel se base sur le langage blade , qui fournit certaines fonctionalitées qui permettent de traiter les données envoyées par le serveur. 
    </p>
    <h4>Passer les données aux vues :</h4>
    <pre>
        //Controller 
        public function user(){
            return view('welcome',['name'=>"mohamed"])
        }
        //View 
        Hello , {{ $name }}
    </pre>
    <h4>Les directives blades   </h4>
    <table class="table table-striped">
        <thead class="table-info">

            <tr>
                <th>Directive</th>
                <th>Utilisaion</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td>@isset() & @empty()</td>
                <td>Sert à vérifier si les variables passé en paramètre contiennent des valuer , pour ne pas lever des exceptions</td>
            </tr>
            <tr>
                <td>@auth // @endauth</td>
                <td>Pour vérifier si l'utilisateur est authentifié</td>
            </tr>
            <tr>
                <td>@guest // @endguest</td>
                <td>Pour vérifier si l'utilisateur  n'est pas authentifié</td>
            </tr>
            <tr>
                <td>@production // @endproduction </td>
                <td>Pour vérifier si l'application est en production</td>
            </tr>
            <tr>
                <td>@switch() // @endswitch  </td>
                <td>Pour vérifier si une variable est dans un intervalle de données</td>
            </tr>
            <tr>
                <td>Loops : <br>
                @for() // @endfor <br>
                @foreach // @endforeach<br>
                @while  // @endwhile    
                </td>
                </td>
                <td>Pour effectuer des boucles </td>
            </tr>
            <tr>
                <td>@php // @endphp</td>
                <td>Pour exéctuer un code php</td>
            </tr>
            <tr>
                <td>@if // @endif</td>
                <td>Pour l'utilisation des conditions</td>
            </tr>

        </tbody>
    </table>
    <p>Il existe bien d'autres directives , pour plus d'informations visiter la documentation officiel</p>
   
    <h3 id="relationships">6.6 Relations entre les modèles :</h3>
    <p>
        Afin d'assurer une cohérence entre les différents modèles, la création des relations entre eux est indispensables
        (hasMany , hasOne , BelongsTo ...)
        <h4>One To Many :</h4>
        Pour définir qu'un modèle donnée possèdent plusieurs objets liés. <br>
        Example : <br>
        Un utilisateur possèdent plusieurs notifications. <br>
        <pre>
            //  ajouter dans le fichier User
            public function notifications(){

                return $this->hasMany(Notification::class,'user_id');
 
            } 
            //  ajouter dans le fichier Notification
            public function user(){

                return $this->belongsTo(User::class,'user_id');
 
            } 
        </pre>
        <p>Note : une clé étrangère doit exister dans le fichier de migration de la table notifications </p>
        <h4>Many To Many</h4> 
        Pour définir que plusieurs objets de même modèles  possèdent plusieurs objets liés d'un autre modèles. <br>
        Example :  <br>
        plusieurs taches peuvent être réalisées par plusieurs personnes. <br>
        <pre>
            //  ajouter dans le fichier User
            public function tasks(){

                return $this->belongsToMany(Task::class);
 
            } 
            //  ajouter dans le fichier Task
            public function users(){

                return $this->belongsToMany(User::class);
 
            } 
        </pre>
        <p>
            NB :  Une table de pivot doit être créée dans le fichier de migration avec le nom task_user. <br>
            qui possèdent deux clé étrangère task_id , user_id  dans les tables tasks et users respectivement. 
        </p>

    </p>
    <h3 id="querying">6.7 Eloquent Querying</h3>
    <p>
        toute ma puissance de laravel demeure dans, l'eloquent querying est  un outils qui permet d'envoyer des requêtes aux bases de données d'une manière 
          simple et facile. <br>
          Example :  <br>
          <span class="text-success">// Récupérer la liste de tous les utilisateurs :</span> <br>
          $users = User::all(); <br>

          <span class="text-success">// Récupérer un utilisateur en utilisant sa clé primaire :</span> <br>
          $user = User::find($primary_key_value); <br>


          <span class="text-success">// Récupérer un utilisateur en appliquant quelques conditions :</span> <br>
          $user = User::where("nom","value")->
                        orWhere("DN","like","%2022%")
                        ->get(); <br>
          
        <span class="text-success">// Créer un utilisateur :</span> <br>
          $user = User::create(["name"=>"youcef","email"=>"email@email.com","password"=>"password"]); <br>

        <span class="text-success">// Mettre à jour un utilisateur :</span> <br>
          $user = User::where("name","username")
                    ->update(["password"=>"password"]); <br>

                
        <span class="text-success">// Supprimer un utilisateur :</span> <br>
        $user = User::find(1)->delete(); <br>           
        
    </p>
</div>



</div>



                </div>
         











        <!-- Bootstrap core JS-->
        <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/js/bootstrap.bundle.min.js"></script>
        <!-- Core theme JS-->
        <script src="js/scripts.js"></script>
    </body>
    <style>
        *{
               font-family: 'Poppins', sans-serif;
        }
    </style>
    <script>
       
        function copy(val){
            const el = document.getElementsByClassName(val)[0];
            console.log(el);
            el.select();
            document.execCommand('copy');

        }
        function execute(val){
            var l=document.getElementsByClassName(val)[0].value;
          
            var opened = window.open("Example","Example");
            opened.document.write(l);
            opened.document.title="Example";
        }
            
            

       
    </script>
</html>
